"use strict";(self.webpackChunkwaste2earn_home=self.webpackChunkwaste2earn_home||[]).push([[1589],{42774:(e,t,s)=>{s.d(t,{Q:()=>l});var n=s(5685),i=s.n(n),o=s(4522),r=s(78878),d=s(36092);function l(e){let{content:t}=e;const[s]=(0,r.cO)();return(0,d.jsx)(o.h,{onClick:()=>{t&&(i()(t),s("Copy Success",r.mh))},style:{cursor:"pointer"}})}},51589:(e,t,s)=>{s.r(t),s.d(t,{default:()=>ee});var n=s(38938),i=s(91331),o=s(8428),r=s(27025),d=s(29872),l=s(22226),a=s(53248),c=s(54500),x=s(59257),p=s(71649),u=s(94247),m=s(68483),f=s(67694),h=s(90329),v=s(944),_=s(61081),j=s(42774),g=s(14754),A=s.n(g),S=s(5989),y=s(36092);function b(e){let{label:t,value:s}=e;return(0,y.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,y.jsx)(o.A,{component:"div",children:t}),(0,y.jsx)(o.A,{component:"div",children:s})]})}function E(e){let{proposal_data:t}=e;const{proposal_id:s}=(0,m.g)(),{isExecuted:n,proposer:r}=(0,a.useMemo)((()=>{var e,s;if(!t)return{};const n=t.proposal[0];if(!n)return{};const i=null===(e=t.wait_for_quiet_state[0])||void 0===e?void 0:e.current_deadline_timestamp_seconds;return{url:n.url,title:n.title,action:n.action,summary:n.summary,seconds:i?i-BigInt((0,p.$)()):void 0,isExecuted:t.executed_timestamp_seconds>0,proposer:null===(s=t.proposer[0])||void 0===s?void 0:s.id}}),[t]);return(0,y.jsxs)(i.A,{children:[(0,y.jsx)(o.A,{sx:{color:"text.primary",fontWeight:500,fontSize:"16px"},children:(0,y.jsx)(h.x6,{id:"bBP67Q"})}),(0,y.jsx)(i.A,{sx:{margin:"20px 0 0 0"},children:(0,y.jsxs)(i.A,{sx:{display:"grid",gridTemplateColumns:"1fr",gap:"20px 0"},children:[(0,y.jsx)(b,{label:(0,y.jsx)(h.x6,{id:"tp9FvG"}),value:s}),(0,y.jsx)(b,{label:(0,y.jsx)(h.x6,{id:"+zy2Nq"}),value:t?(0,S.ds)(null===t||void 0===t?void 0:t.action):"--"}),(0,y.jsx)(b,{label:(0,y.jsx)(h.x6,{id:"uAQUqI"}),value:(0,y.jsx)(o.A,{children:n?(0,y.jsx)(h.x6,{id:"L4jnDP"}):(0,y.jsx)(h.x6,{id:"1TNIig"})})}),(0,y.jsx)(b,{label:(0,y.jsx)(h.x6,{id:"V9u7wK"}),value:(0,y.jsx)(o.A,{children:t?S.Wv[(0,S.qk)(t)]:"--"})}),(0,y.jsx)(b,{label:(0,y.jsx)(h.x6,{id:"d+F6q9"}),value:(0,y.jsx)(o.A,{children:null!==t&&void 0!==t&&t.proposal_creation_timestamp_seconds?A()(Number(t.proposal_creation_timestamp_seconds*BigInt(1e3))).format("YYYY-MM-DD HH:mm:ss"):"--"})}),n?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(b,{label:(0,y.jsx)(h.x6,{id:"N9JmqZ"}),value:(0,y.jsx)(o.A,{children:null!==t&&void 0!==t&&t.decided_timestamp_seconds?A()(Number(t.decided_timestamp_seconds*BigInt(1e3))).format("YYYY-MM-DD HH:mm:ss"):"--"})}),(0,y.jsx)(b,{label:(0,y.jsx)(h.x6,{id:"L4jnDP"}),value:(0,y.jsx)(o.A,{children:null!==t&&void 0!==t&&t.executed_timestamp_seconds?A()(Number(t.executed_timestamp_seconds*BigInt(1e3))).format("YYYY-MM-DD HH:mm:ss"):"--"})})]}):null,(0,y.jsx)(b,{label:(0,y.jsx)(h.x6,{id:"5nBkYU"}),value:r?(0,y.jsxs)(i.A,{sx:{display:"flex",gap:"0 5px",alignItems:"center"},children:[(0,y.jsx)(o.A,{children:(0,v.m)((0,_.U5)(r))}),(0,y.jsx)(j.Q,{content:(0,_.U5)(r)})]}):"--"})]})})]})}var P=s(37155);const w=(e,t)=>{const{fraction:s=3}=t||{};return"".concat(new P.A(100*e).toFixed(s),"%")};var T=s(67132),N=s(25794),R=s(58367),C=s(67806),D=s(55685),k=s(69535);function O(e){let{voteableNeurons:t,onCheckedChange:s,proposal:n}=e;const[r,d]=(0,a.useState)([]),[l,c]=(0,a.useState)(!1);(0,a.useEffect)((()=>{const e=t.map((e=>(0,C.lg)(e).id)).filter((e=>void 0!==e));d(e);const i=(0,C.QC)(t.filter((t=>{const s=(0,C.lg)(t);return!!s.id&&e.includes(s.id)})),n);s(e,i)}),[t,n]);const x=(0,a.useMemo)((()=>(0,C.QC)(t.filter((e=>{const t=(0,C.lg)(e);return!!t.id&&r.includes(t.id)})),n)),[t,n,r]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",cursor:"pointer",alignItems:"center","@media(max-width: 640px)":{flexDirection:"column",gap:"5px",alignItems:"flex-start"}},onClick:()=>{c(!l)},children:[(0,y.jsxs)(i.A,{sx:{display:"flex",gap:"0 5px",alignItems:"center",width:"fit-content"},children:[(0,y.jsx)(o.A,{children:(0,y.jsx)(h.x6,{id:"MkyATu",values:{0:r.length,1:t.length}})}),(0,y.jsx)(D.A,{size:"18px",style:{transform:l?"rotate(180deg)":"rotate(0deg)"}})]}),(0,y.jsx)(o.A,{children:(0,y.jsx)(h.x6,{id:"+S/KCx",values:{0:(0,C.GS)(x)}})})]}),(0,y.jsx)(N.A,{in:l,children:(0,y.jsx)(i.A,{sx:{padding:"12px 0",display:"flex",flexDirection:"column",gap:"10px 0"},children:t.map((e=>{const l=(0,C.lg)(e);return void 0===l.id?null:(0,y.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,y.jsx)(o.A,{sx:{fontSize:"12px"},children:(0,v.m)(l.id,12)}),(0,y.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:"0 8px"},children:[(0,y.jsx)(o.A,{sx:{fontSize:"12px"},children:(0,C.GS)((0,C.BC)(e,n))}),(0,y.jsx)(k.A,{checked:r.includes(l.id),onChange:(e,i)=>((e,i)=>{if(!i)return;let o=[];e?(o=[...r,i],d(o)):(o=[...r],o.splice(r.indexOf(i),1),d(o));const l=(0,C.QC)(t.filter((e=>{const t=(0,C.lg)(e);return!!t.id&&o.includes(t.id)})),n);s(o,l)})(i,l.id)})]})]})}))})})]})}var I=s(9259),M=s(78878),z=s(82424),L=s(53199);function U(e){let{proposal_id:t,onVoteCallEnded:s,governance_id:n,rejected:i,votingPowers:o,onClose:r,voteNeurons:d,proposal:c,open:x}=e;const[p,u]=(0,M.dx)(),[m]=(0,M.cO)(),[f,h]=(0,a.useState)(!1);return(0,y.jsx)(z.u,{open:x,onConfirm:async()=>{if(f||!n||!t||!c||!d)return;h(!0),p();let e=0;d.forEach((o=>{var a;const x=(0,C.lg)(o),p=null===(a=o.id[0])||void 0===a?void 0:a.id;if(x.id&&p){if(c.ballots.find((e=>{let[t]=e;return t===x.id}))){const o=i?L.xS.No:L.xS.Yes;(0,l.$s)(n,p,o,BigInt(t)).then((t=>{let{status:n,message:i,data:o}=t;e+=1;const l=o?o.command[0]:void 0,a=l&&"Error"in l?l.Error:void 0;if("ok"===n)if(a&&"Neuron already voted on proposal."!==a.error_message){const e=a.error_message;m(""!==e?e:I.Ru._({id:"TgADer",values:{0:x.id}}),M.XI)}else m(I.Ru._({id:"uilgkP",values:{0:x.id}}),M.mh);else m(null!==i&&void 0!==i?i:I.Ru._({id:"TgADer",values:{0:x.id}}),M.XI);e===d.length&&(s&&s(),u(),h(!1),r())}))}}else e+=1}))},onClose:r,title:i?I.Ru._({id:"SY3Lj0"}):I.Ru._({id:"K7yEdW"}),text:i?I.Ru._({id:"G/WfPx",values:{0:(0,C.GS)(o)}}):I.Ru._({id:"UfJ69E",values:{0:(0,C.GS)(o)}})})}function W(e){let{yes:t,no:s,YesColor:o,NoColor:r,immediateMajorityPercent:d,standardMajorityPercent:l}=e;const a=(0,n.A)();return(0,y.jsxs)(i.A,{sx:{position:"relative",width:"100%",height:"10px"},children:[(0,y.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",width:"100%",height:"10px",borderRadius:"12px",background:a.palette.background.level3},children:[(0,y.jsx)(i.A,{sx:{width:t,height:"100%",borderTopLeftRadius:"12px",borderBottomLeftRadius:"12px",background:o}}),(0,y.jsx)(i.A,{sx:{width:s,height:"100%",borderTopRightRadius:"12px",borderBottomRightRadius:"12px",background:r}})]}),(0,y.jsxs)(i.A,{sx:{position:"absolute",width:"100%",height:"100%",top:0,left:0},children:[d?(0,y.jsx)(i.A,{className:"immediate-majority",sx:{position:"absolute",bottom:0,left:"".concat(d,"%"),width:"2px",height:"16px",background:"#ffffff",transform:"translate(-50%, 0)","&: after":{display:"block",position:"absolute",top:"-5px",left:"-2px",content:'" "',width:"6px",height:"6px",borderRadius:"50%",background:a.colors.primaryMain}}}):null,l?(0,y.jsx)(i.A,{className:"standard-majority",sx:{position:"absolute",bottom:0,left:"".concat(l,"%"),width:"2px",height:"16px",background:"#ffffff",transform:"translate(-50%, 0)","&: after":{display:"block",position:"absolute",top:"-5px",left:"-2px",content:'" "',width:"6px",height:"6px",borderRadius:"50%",background:a.colors.secondaryMain}}}):null]})]})}var B=s(33010),F=s(71319);function Y(e){let{neuron:t,proposal_data:s}=e;const r=(0,n.A)(),d=r.colors.successDark,l=r.colors.errorDark,{ballot:c,votingPower:x}=(0,a.useMemo)((()=>s?{ballot:(0,C.HA)(t,s),votingPower:(0,C.BC)(t,s)}:{}),[t,s]);return(0,y.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,y.jsx)(o.A,{sx:{fontSize:"12px"},children:(0,C.lg)(t)?(0,v.m)((0,C.lg)(t).id,12):"--"}),(0,y.jsxs)(i.A,{sx:{display:"flex",gap:"0 5px",alignItems:"center"},children:[(0,y.jsx)(o.A,{sx:{fontSize:"12px"},children:x?(0,C.GS)(x):"--"}),c?c.vote===L.xS.Yes?(0,y.jsx)(B.A,{size:"14px",color:d}):(0,y.jsx)(F.A,{size:"14px",color:l}):null]})]})}function q(e){let{proposal_data:t,votedNeurons:s}=e;const[n,r]=(0,a.useState)(!1);return s&&t&&s.length>0?(0,y.jsxs)(i.A,{sx:{margin:"20px 0 0 0"},children:[(0,y.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between","@media(max-width: 640px)":{flexDirection:"column",gap:"5px"}},children:[(0,y.jsxs)(i.A,{sx:{display:"flex",gap:"0 5px",alignItems:"center",cursor:"pointer"},onClick:()=>r(!n),children:[(0,y.jsx)(o.A,{children:(0,y.jsx)(h.x6,{id:"3yxluH",values:{0:s.length}})}),(0,y.jsx)(D.A,{size:"18px",style:{transform:n?"rotate(180deg)":"rotate(0deg)"}})]}),(0,y.jsx)(o.A,{children:(0,y.jsx)(h.x6,{id:"+S/KCx",values:{0:(0,C.GS)((0,C.QC)(s,t))}})})]}),(0,y.jsx)(N.A,{in:n,children:(0,y.jsx)(i.A,{sx:{padding:"12px"},children:(0,y.jsx)(i.A,{sx:{display:"flex",flexDirection:"column",gap:"10px 0"},children:s.map(((e,s)=>{var n,i;return(0,y.jsx)(Y,{proposal_data:t,neuron:e},null!==(n=e.id[0])&&void 0!==n&&n.id?(0,_.U5)(null===(i=e.id[0])||void 0===i?void 0:i.id):"neuron_".concat(s))}))})})})]}):null}function V(e){let{proposal_id:t,governance_id:s,proposal_data:r,neurons:d,neuronSystemParameters:l,onRefresh:x}=e;const u=(0,n.A)(),[m,f]=(0,a.useState)([]),[j,g]=(0,a.useState)(!1),[A,S]=(0,a.useState)(!1),[b,E]=(0,a.useState)(!1),[k,I]=(0,a.useState)(BigInt(0)),M=(0,a.useMemo)((()=>{if(d&&r)return(0,C.Bb)({neurons:d,proposal:r})}),[d,r]),z=(0,a.useMemo)((()=>{if(d&&r)return(0,C.O2)({neurons:d,proposal:r})}),[d,r]),L=(0,a.useMemo)((()=>{if(d&&r)return(0,C.Br)({neurons:d,proposal:r})}),[d,r]),{castVotesNo:B,castVotesYes:F,yesProportion:Y,noProportion:V,yes:G,no:H,immediateMajorityPercent:Q,standardMajorityPercent:X,seconds:$,isExecuted:J}=(0,a.useMemo)((()=>{var e,t,s,n,i,o,d,l,a,c;if(!r)return{};const x=r.proposal[0];if(!x)return{};const u=null===(e=r.wait_for_quiet_state[0])||void 0===e?void 0:e.current_deadline_timestamp_seconds,m=Number(null!==(t=null===(s=r.latest_tally[0])||void 0===s?void 0:s.yes)&&void 0!==t?t:0)/10**8,f=Number(null!==(n=null===(i=r.latest_tally[0])||void 0===i?void 0:i.no)&&void 0!==n?n:0)/10**8,h=Number(null!==(o=null===(d=r.latest_tally[0])||void 0===d?void 0:d.total)&&void 0!==o?o:0)/10**8,v=m+f,_=v>0?m/v:0,j=v>0?f/v:0,g=null===(l=r.minimum_yes_proportion_of_exercised[0])||void 0===l?void 0:l.basis_points[0],A=null===(a=r.minimum_yes_proportion_of_total[0])||void 0===a?void 0:a.basis_points[0];return{url:x.url,title:x.title,action:x.action,summary:x.summary,seconds:u?u-BigInt((0,p.$)()):void 0,isExecuted:r.executed_timestamp_seconds>0,proposer:null===(c=r.proposer[0])||void 0===c?void 0:c.id,yes:m,no:f,total:h,yesProportion:h&&m?m/h:0,noProportion:h&&f?f/h:0,castVotesYes:_,castVotesNo:j,immediateMajorityPercent:g?Number(g)/100:void 0,standardMajorityPercent:A?Number(A)/100:void 0}}),[r]),K=u.colors.successDark,Z=u.colors.errorDark,{minimumDissolveDelaySeconds:ee}=(0,a.useMemo)((()=>l?{minimumDissolveDelaySeconds:l.neuron_minimum_dissolve_delay_to_vote_seconds[0]}:{}),[l]),te=(0,a.useMemo)((()=>{if(z)return z.filter((e=>{const t=(0,C.lg)(e);return void 0!==t.id&&m.includes(t.id)}))}),[z,m]);return(0,y.jsxs)(i.A,{children:[(0,y.jsx)(o.A,{sx:{color:"text.primary",fontWeight:500,fontSize:"16px"},children:(0,y.jsx)(h.x6,{id:"uQ4QOe"})}),(0,y.jsxs)(i.A,{sx:{margin:"20px 0 0 0"},children:[(0,y.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,y.jsxs)(i.A,{children:[(0,y.jsx)(o.A,{sx:{color:K},children:(0,y.jsx)(h.x6,{id:"l75CjT"})}),(0,y.jsx)(o.A,{sx:{fontSize:"22px",fontWeight:500,color:K},children:void 0!==Y?w(Y):"--"})]}),(0,y.jsxs)(i.A,{children:[(0,y.jsx)(o.A,{align:"right",sx:{color:Z},children:(0,y.jsx)(h.x6,{id:"1UzENP"})}),(0,y.jsx)(o.A,{sx:{fontSize:"22px",fontWeight:500,color:Z},align:"right",children:void 0!==V?w(V):"--"})]})]}),(0,y.jsx)(i.A,{sx:{margin:"20px 0 10px 0"},children:(0,y.jsx)(W,{yes:Y,no:V,YesColor:K,NoColor:Z,immediateMajorityPercent:Q,standardMajorityPercent:X})}),(0,y.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,y.jsxs)(i.A,{children:[(0,y.jsxs)(o.A,{children:[(0,y.jsxs)(o.A,{sx:{fontSize:"12px",color:K},component:"span",children:[G?new P.A(G).toFormat(0):"--","\xa0"]}),(0,y.jsx)(o.A,{sx:{fontSize:"12px"},component:"span",children:(0,y.jsx)(h.x6,{id:"pdcS9C"})})]}),(0,y.jsxs)(o.A,{sx:{margin:"5px 0 0 0"},children:[(0,y.jsxs)(o.A,{sx:{fontSize:"12px",color:K},component:"span",children:[void 0!==F?w(F):"--","\xa0"]}),(0,y.jsx)(o.A,{sx:{fontSize:"12px"},component:"span",children:(0,y.jsx)(h.x6,{id:"fFaOHo"})}),(0,y.jsx)(o.A,{sx:{fontSize:"12px"},children:(0,y.jsx)(h.x6,{id:"ER9vmV",values:{0:void 0===Q?"--":"".concat(Q,"%")}})})]})]}),J?null:(0,y.jsxs)(i.A,{children:[(0,y.jsx)(o.A,{sx:{fontSize:"12px",textAlign:"center"},children:(0,y.jsx)(h.x6,{id:"sZg7s1"})}),(0,y.jsx)(o.A,{sx:{fontSize:"12px",textAlign:"center",margin:"5px 0 0 0"},children:$?(0,R.LA)({seconds:$}):"--"})]}),(0,y.jsxs)(i.A,{children:[(0,y.jsxs)(o.A,{sx:{textAlign:"right"},children:[(0,y.jsxs)(o.A,{sx:{fontSize:"12px",color:Z},component:"span",children:[H?new P.A(H).toFormat(0):"--","\xa0"]}),(0,y.jsx)(o.A,{sx:{fontSize:"12px"},component:"span",children:(0,y.jsx)(h.x6,{id:"pdcS9C"})})]}),(0,y.jsxs)(o.A,{sx:{textAlign:"right",margin:"5px 0 0 0"},children:[(0,y.jsxs)(o.A,{sx:{fontSize:"12px",color:Z},component:"span",children:[void 0!==B?w(B):"--","\xa0"]}),(0,y.jsx)(o.A,{sx:{fontSize:"12px"},component:"span",children:(0,y.jsx)(h.x6,{id:"fFaOHo"})})]})]})]})]}),(0,y.jsxs)(i.A,{sx:{margin:"20px 0 0 0"},children:[(0,y.jsx)(o.A,{color:"text.primary",fontWeight:500,children:(0,y.jsx)(h.x6,{id:"6Tvi+4"})}),(0,y.jsx)(i.A,{sx:{margin:"10px 0 0 0"},children:(0,y.jsx)(c.vJ,{label:(0,y.jsx)(o.A,{children:"1. Immediate supermajority decision"}),description:(0,y.jsxs)(o.A,{sx:{fontSize:"12px",padding:"5px"},children:["A critical proposal is immediately adopted or rejected if, before the voting period ends, more than 67% of the total voting power votes Yes, or at least 33% votes No, respectively (indicated by"," ",(0,y.jsx)(o.A,{component:"span",sx:{display:"inline-block",width:"6px",height:"6px",background:u.colors.primaryMain,borderRadius:"50%"}}),")."]})})}),(0,y.jsx)(i.A,{sx:{margin:"5px 0 0 0"},children:(0,y.jsx)(c.vJ,{label:(0,y.jsx)(o.A,{children:"2. Standard supermajority decision"}),description:(0,y.jsxs)(o.A,{sx:{fontSize:"12px",padding:"5px"},children:["At the end of the voting period, a critical proposal is adopted if more than 67% of the votes cast are Yes votes, provided these votes represent at least 20% of the total voting power (indicated by\xa0",(0,y.jsx)(o.A,{component:"span",sx:{display:"inline-block",width:"6px",height:"6px",background:u.colors.secondaryMain,borderRadius:"50%"}}),"). Otherwise, it is rejected. Before a proposal is decided, the voting period can be extended in order to \u201cwait for quiet\u201d. Such voting period extensions occur when a proposal\u2019s voting results turn from either a Yes majority to a No majority or vice versa."]})})})]}),J?null:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(i.A,{sx:{margin:"30px 0 0 0"},children:(0,y.jsxs)(i.A,{sx:{display:"flex",gap:"0 10px"},children:[(0,y.jsx)(i.A,{sx:{flex:1},children:(0,y.jsx)(T.A,{variant:"contained",fullWidth:!0,sx:{background:u.colors.successDark,"&:hover":{background:u.colors.successDark}},disabled:0===m.length,onClick:()=>{S(!0),E(!0)},children:(0,y.jsx)(h.x6,{id:"zssEea"})})}),(0,y.jsx)(i.A,{sx:{flex:1},children:(0,y.jsx)(T.A,{variant:"contained",fullWidth:!0,sx:{background:u.colors.errorDark,"&:hover":{background:u.colors.errorDark}},disabled:0===m.length,onClick:()=>{S(!0),E(!1)},children:(0,y.jsx)(h.x6,{id:"1t/NnN"})})})]})}),z&&r&&z.length>0?(0,y.jsx)(i.A,{sx:{margin:"10px 0 0 0"},children:(0,y.jsx)(O,{voteableNeurons:z,onCheckedChange:(e,t)=>{f(e),I(t)},proposal:r})}):(0,y.jsx)(o.A,{sx:{margin:"10px 0 0 0"},children:(0,y.jsx)(h.x6,{id:"m1X2zg"})}),(0,y.jsx)(q,{votedNeurons:L,proposal_data:r}),M&&M.length>0?(0,y.jsxs)(i.A,{sx:{margin:"20px 0 0 0"},children:[(0,y.jsxs)(i.A,{sx:{display:"flex",gap:"0 5px",alignItems:"center",cursor:"pointer"},onClick:()=>g(!j),children:[(0,y.jsx)(o.A,{children:(0,y.jsx)(h.x6,{id:"MFGkV1",values:{0:M.length}})}),(0,y.jsx)(D.A,{size:"18px",style:{transform:j?"rotate(180deg)":"rotate(0deg)"}})]}),(0,y.jsx)(N.A,{in:j,children:(0,y.jsxs)(i.A,{sx:{padding:"12px"},children:[(0,y.jsx)(o.A,{sx:{fontSize:"12px"},children:(0,y.jsx)(h.x6,{id:"zysE6A"})}),(0,y.jsx)(i.A,{sx:{margin:"20px 0 0 0",display:"flex",flexDirection:"column",gap:"10px 0"},children:M.map(((e,t)=>{var s,n;return(0,y.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center","@media(max-width: 640px)":{flexDirection:"column",justifyContent:"space-between",alignItems:"flex-start"}},children:[(0,y.jsx)(o.A,{sx:{fontSize:"12px"},children:(0,C.lg)(e)?(0,v.m)((0,C.lg)(e).id,12):"--"}),void 0!==ee?(0,y.jsx)(o.A,{sx:{fontSize:"12px"},children:(0,y.jsx)(h.x6,{id:"PrQnBy",values:{0:(0,C.PQ)(ee)}})}):null]},null!==(s=e.id[0])&&void 0!==s&&s.id?(0,_.U5)(null===(n=e.id[0])||void 0===n?void 0:n.id):"neuron_".concat(t))}))})]})})]}):null,(0,y.jsx)(U,{governance_id:s,proposal_id:t,proposal:r,rejected:!b,open:A,onClose:()=>S(!1),votingPowers:k,voteNeurons:te,onVoteCallEnded:x})]})]})}function G(e){let{proposal_data:t}=e;const{title:s,summary:n}=(0,a.useMemo)((()=>{var e,s;if(!t)return{};const n=t.proposal[0];if(!n)return{};const i=null===(e=t.wait_for_quiet_state[0])||void 0===e?void 0:e.current_deadline_timestamp_seconds;return{url:n.url,title:n.title,action:n.action,summary:n.summary,seconds:i?i-BigInt((0,p.$)()):void 0,isExecuted:t.executed_timestamp_seconds>0,proposer:null===(s=t.proposer[0])||void 0===s?void 0:s.id}}),[t]);return(0,y.jsx)(c.Am,{level:4,sx:{margin:"20px 0 0 0"},children:(0,y.jsxs)(i.A,{children:[(0,y.jsx)(o.A,{sx:{color:"text.primary",fontWeight:500,fontSize:"16px"},children:(0,y.jsx)(h.x6,{id:"9YZh15"})}),(0,y.jsx)(o.A,{sx:{margin:"20px 0 0 0"},children:s}),(0,y.jsx)(c.Am,{sx:{margin:"20px 0 0 0"},level:3,children:(0,y.jsx)(o.A,{children:n})})]})})}var H=s(28386),Q=s(15326),X=s(5685),$=s.n(X);const J=new H.F({html:!1,breaks:!0,typographer:!1,linkTarget:"_blank"}).use(Q.B);function K(e){let{content:t}=e;const s=(0,a.useMemo)((()=>{const e=t;return J.render(e)}),[t]);return(0,a.useEffect)((()=>{var e,t;null===(e=document)||void 0===e||null===(t=e.querySelector(".markdown-body"))||void 0===t||t.querySelectorAll("pre>code").forEach((e=>{var t;null===(t=e.parentElement)||void 0===t||t.classList.add("rounded-lg");const s=document.createElement("a"),n=document.createElement("i");n.classList.add("copy"),n.classList.add("text-skin-text"),n.classList.add("iconcopy"),n.classList.add("iconfont"),s.appendChild(n),s.addEventListener("click",(()=>{const t=e.innerText.trim();$()(t)})),e.appendChild(s)}))}),[]),(0,y.jsx)("div",{className:"markdown-body",dangerouslySetInnerHTML:{__html:s}})}function Z(e){let{proposal_data:t}=e;const{payload_text_rendering:s}=(0,a.useMemo)((()=>{var e,s;if(!t)return{};const n=t.proposal[0];if(!n)return{};const i=null===(e=t.wait_for_quiet_state[0])||void 0===e?void 0:e.current_deadline_timestamp_seconds;return{url:n.url,title:n.title,action:n.action,summary:n.summary,seconds:i?i-BigInt((0,p.$)()):void 0,isExecuted:t.executed_timestamp_seconds>0,proposer:null===(s=t.proposer[0])||void 0===s?void 0:s.id,payload_text_rendering:t.payload_text_rendering[0]}}),[t]);return(0,y.jsx)(c.Am,{level:4,sx:{margin:"20px 0 0 0"},children:(0,y.jsxs)(i.A,{children:[(0,y.jsx)(o.A,{sx:{color:"text.primary",fontWeight:500,fontSize:"16px"},children:(0,y.jsx)(h.x6,{id:"c2/9VE"})}),s?(0,y.jsx)(c.Am,{level:3,sx:{margin:"20px 0 0 0"},children:(0,y.jsx)(K,{content:s})}):null]})})}function ee(){const e=(0,n.A)(),t=(0,m.W6)(),s=(0,x.WT)(),[h,v]=(0,a.useState)(0),{governance_id:_,proposal_id:j}=(0,m.g)(),{result:g}=(0,r.BC)(),A=(0,a.useMemo)((()=>{if(!_||!g)return;const e=g.instances.find((e=>e.governance_canister_id.toString()===_));return e||void 0}),[g,_]),S=null===A||void 0===A?void 0:A.ledger_canister_id.toString(),{result:b}=(0,u.Vs)(S),{result:P,loading:w}=(0,d.aj)(_,j?BigInt(j):void 0,h),{result:T}=(0,l.uU)({canisterId:_,limit:100,of_principal:s,refresh:h}),{result:N}=(0,l.jA)(_),{title:R,isExecuted:C}=(0,a.useMemo)((()=>{var e,t;if(!P)return{};const s=P.proposal[0];if(!s)return{};const n=null===(e=P.wait_for_quiet_state[0])||void 0===e?void 0:e.current_deadline_timestamp_seconds;return{url:s.url,title:s.title,action:s.action,summary:s.summary,seconds:n?n-BigInt((0,p.$)()):void 0,isExecuted:P.executed_timestamp_seconds>0,proposer:null===(t=P.proposer[0])||void 0===t?void 0:t.id}}),[P]);return(0,y.jsx)(i.A,{sx:{display:"flex",justifyContent:"center"},children:(0,y.jsx)(i.A,{sx:{width:"100%",maxWidth:"1400px"},children:(0,y.jsxs)(c.Am,{children:[(0,y.jsx)(i.A,{sx:{margin:"0 0 12px 0"},children:(0,y.jsx)(f.A,{color:"#ffffff",size:"20px",cursor:"pointer",onClick:()=>{t.goBack()}})}),(0,y.jsx)(i.A,{sx:{display:"flex",justifyContent:"center"},children:w?(0,y.jsx)(i.A,{sx:{width:"100%"},children:(0,y.jsxs)(c.FO,{children:[(0,y.jsx)("div",{}),(0,y.jsx)("div",{}),(0,y.jsx)("div",{}),(0,y.jsx)("div",{}),(0,y.jsx)("div",{}),(0,y.jsx)("div",{}),(0,y.jsx)("div",{}),(0,y.jsx)("div",{})]})}):(0,y.jsxs)(i.A,{sx:{width:"100%"},children:[(0,y.jsxs)(i.A,{sx:{display:"flex",gap:"0 8px",alignItems:"center"},children:[(0,y.jsx)(c.HM,{logo:null===b||void 0===b?void 0:b.logo,size:"24px",tokenId:S}),(0,y.jsx)(o.A,{fontSize:"16px",fontWeight:500,color:"text.primary",children:R}),(0,y.jsx)(i.A,{sx:{padding:"3px 10px",borderRadius:"12px",background:C?e.palette.background.level1:e.colors.successDark},children:(0,y.jsx)(o.A,{color:"text.primary",children:C?"Executed":"Open"})})]}),(0,y.jsx)(c.Am,{level:4,sx:{margin:"20px 0 0 0"},children:(0,y.jsxs)(i.A,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0 20px","@media(max-width: 980px)":{gridTemplateColumns:"1fr",gap:"40px 0"}},children:[(0,y.jsx)(E,{proposal_data:P}),(0,y.jsx)(V,{proposal_id:j,governance_id:_,proposal_data:P,neurons:T,neuronSystemParameters:N,onRefresh:()=>v(h+1)})]})}),(0,y.jsx)(G,{proposal_data:P}),(0,y.jsx)(Z,{proposal_data:P})]})})]})})})}},5989:(e,t,s)=>{s.d(t,{BX:()=>p,Wv:()=>a,ds:()=>l,qk:()=>x});var n=s(9259),i=s(71649),o=s(37155),r=s(53199);const d=[{id:0,name:"All Topics",description:"Catch-all w.r.t to following for all types of proposals.",function_type:{NativeNervousSystemFunction:{}}},{id:1,name:"Motion",description:"Side-effect-less proposals to set general governance direction.",function_type:{NativeNervousSystemFunction:{}}},{id:2,name:"Manage nervous system parameters",description:"Proposal to change the core parameters of SNS governance.",function_type:{NativeNervousSystemFunction:{}}},{id:3,name:"Upgrade SNS controlled canister",description:"Proposal to upgrade the wasm of an SNS controlled canister.",function_type:{NativeNervousSystemFunction:{}}},{id:4,name:"Add nervous system function",description:"Proposal to add a new, user-defined, nervous system function:a canister call which can then be executed by proposal.",function_type:{NativeNervousSystemFunction:{}}},{id:5,name:"Remove nervous system function",description:"Proposal to remove a user-defined nervous system function,which will be no longer executable by proposal.",function_type:{NativeNervousSystemFunction:{}}},{id:6,name:"Execute nervous system function",description:"Proposal to execute a user-defined nervous system function,previously added by an AddNervousSystemFunction proposal. A canister call will be made when executed.",function_type:{NativeNervousSystemFunction:{}}},{id:7,name:"Upgrade SNS to next version",description:"Proposal to upgrade the WASM of a core SNS canister.",function_type:{NativeNervousSystemFunction:{}}},{id:8,name:"Manage SNS metadata",description:"Proposal to change the metadata associated with an SNS.",function_type:{NativeNervousSystemFunction:{}}},{id:9,name:"Transfer SNS treasury funds",description:"Proposal to transfer funds from an SNS Governance controlled treasury account",function_type:{NativeNervousSystemFunction:{}}},{id:10,name:"Register dapp canisters",description:"Proposal to register a dapp canister with the SNS.",function_type:{NativeNervousSystemFunction:{}}},{id:11,name:"Deregister Dapp Canisters",description:"Proposal to deregister a previously-registered dapp canister from the SNS.",function_type:{NativeNervousSystemFunction:{}}}];function l(e){var t;return null===(t=d.find((t=>t.id===Number(e))))||void 0===t?void 0:t.name}const a={0:n.Ru._({id:"Ef7StM"}),1:n.Ru._({id:"XjMCyL"}),2:n.Ru._({id:"XZR8NZ"}),3:n.Ru._({id:"KWsCqG"})};let c=function(e){return e[e.PROPOSAL_REWARD_STATUS_UNSPECIFIED=0]="PROPOSAL_REWARD_STATUS_UNSPECIFIED",e[e.PROPOSAL_REWARD_STATUS_ACCEPT_VOTES=1]="PROPOSAL_REWARD_STATUS_ACCEPT_VOTES",e[e.PROPOSAL_REWARD_STATUS_READY_TO_SETTLE=2]="PROPOSAL_REWARD_STATUS_READY_TO_SETTLE",e[e.PROPOSAL_REWARD_STATUS_SETTLED=3]="PROPOSAL_REWARD_STATUS_SETTLED",e}({});const x=e=>{var t;let{reward_event_round:s,wait_for_quiet_state:n,is_eligible_for_rewards:o}=e;if(s>0n)return c.PROPOSAL_REWARD_STATUS_SETTLED;const r=(0,i.$)(),d=null===(t=n[0])||void 0===t?void 0:t.current_deadline_timestamp_seconds;return d?r<d?c.PROPOSAL_REWARD_STATUS_ACCEPT_VOTES:o?c.PROPOSAL_REWARD_STATUS_READY_TO_SETTLE:c.PROPOSAL_REWARD_STATUS_SETTLED:c.PROPOSAL_REWARD_STATUS_UNSPECIFIED};function p(e){const t=(new Date).getTime();if(!e.decided_timestamp_seconds||new o.A(e.decided_timestamp_seconds.toString()).gt(t))return r.Bd.PROPOSAL_DECISION_STATUS_OPEN;if(e.executed_timestamp_seconds&&new o.A(e.executed_timestamp_seconds.toString()).lt(t))return r.Bd.PROPOSAL_DECISION_STATUS_EXECUTED;if(e.failed_timestamp_seconds&&new o.A(e.failed_timestamp_seconds.toString(10)).lt(t))return r.Bd.PROPOSAL_DECISION_STATUS_FAILED;if(e.decided_timestamp_seconds&&new o.A(e.decided_timestamp_seconds.toString(10)).lt(t)){var s,n,i;const t=null===(s=e.latest_tally[0])||void 0===s?void 0:s.total,d=null===(n=e.latest_tally[0])||void 0===n?void 0:n.yes,l=null===(i=e.latest_tally[0])||void 0===i?void 0:i.no;if(void 0!==t&&void 0!==d&&void 0!==l)return new o.A(d.toString()).gt(l.toString(10))&&new o.A(t.toString()).times(.03).lt(d.toString())||new o.A(d.toString()).times(2).gt(t.toString(10))?r.Bd.PROPOSAL_DECISION_STATUS_ADOPTED:r.Bd.PROPOSAL_DECISION_STATUS_REJECTED}}},29872:(e,t,s)=>{s.d(t,{GJ:()=>c,aj:()=>a});var n=s(69196),i=s(53248),o=s(35479),r=s(9978),d=s(56760);const l=function(e,t,s,n){return new(s||(s=Promise))((function(i,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function d(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,d)}l((n=n.apply(e,t||[])).next())}))};function a(e,t,s){return(0,d.Pz)((0,i.useCallback)((()=>l(this,void 0,void 0,(function*(){if(e&&void 0!==t)return yield function(e,t){return l(this,void 0,void 0,(function*(){let s;const i=null===(s=(0,o.Pk)(yield(yield(0,n.g_)(e)).get_proposal({proposal_id:(0,r.E)({id:t})})).data)||void 0===s?void 0:s.result;if(i)return i[0]&&"Proposal"in i[0]?i[0].Proposal:void 0}))}(e,t)}))),[e,t]),s)}function c(e){return l(this,arguments,void 0,(function(e){let{canisterId:t,include_reward_status:s,include_status:i,exclude_type:r,before_proposal:d,limit:l}=e;return function*(){let e;return null===(e=(0,o.Pk)(yield(yield(0,n.g_)(t)).list_proposals({include_reward_status:s,before_proposal:d,limit:l,exclude_type:r,include_status:i})).data)||void 0===e?void 0:e.proposals}()}))}}}]);
//# sourceMappingURL=1589.e00479af.chunk.js.map