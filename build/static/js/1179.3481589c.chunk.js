"use strict";(self.webpackChunkwaste2earn_home=self.webpackChunkwaste2earn_home||[]).push([[1179],{2860:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(44342),s=n.n(i),r=n(36092);const a=e=>{let{value:t,...n}=e;return(0,r.jsx)(s(),{value:t,...n})}},16429:(e,t,n)=>{n.d(t,{r:()=>s});var i=n(53248);function s(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;const[s,r]=(0,i.useState)(void 0),[a,c]=(0,i.useState)(0);return(0,i.useEffect)((()=>{!async function(){if(e){const t=await e();r(t)}}()}),[a,e,t]),(0,i.useEffect)((()=>{const t=setInterval((()=>{e&&c((e=>e+1))}),n);return()=>{clearInterval(t)}}),[n,e]),(0,i.useMemo)((()=>s),[s])}},61179:(e,t,n)=>{n.r(t),n.d(t,{Buttons:()=>me,default:()=>fe});var i=n(9259),s=n(53248),r=n(68483),a=n(91331),c=n(84755),l=n(67263),o=n(37037),d=n(35479),x=n(9978),u=n(93864),h=n(24479);const p=e=>{let{IDL:t}=e;const n=t.Variant({RestrictedTo:t.Vec(t.Principal),DepositsRestrictedTo:t.Vec(t.Principal),ReadOnly:t.Null,GeneralAvailability:t.Null}),i=t.Record({kyt_principal:t.Opt(t.Principal),mode:t.Opt(n),retrieve_btc_min_amount:t.Opt(t.Nat64),max_time_in_queue_nanos:t.Opt(t.Nat64),min_confirmations:t.Opt(t.Nat32),kyt_fee:t.Opt(t.Nat64)}),s=t.Variant({Mainnet:t.Null,Regtest:t.Null,Testnet:t.Null}),r=t.Record({kyt_principal:t.Opt(t.Principal),ecdsa_key_name:t.Text,mode:n,retrieve_btc_min_amount:t.Nat64,ledger_id:t.Principal,max_time_in_queue_nanos:t.Nat64,btc_network:s,min_confirmations:t.Opt(t.Nat32),kyt_fee:t.Opt(t.Nat64)}),a=(t.Variant({Upgrade:t.Opt(i),Init:r}),t.Record({owner:t.Principal,subaccount:t.Opt(t.Vec(t.Nat8))})),c=t.Record({height:t.Nat32,value:t.Nat64,outpoint:t.Record({txid:t.Vec(t.Nat8),vout:t.Nat32})}),l=t.Variant({CallFailed:t.Null,TaintedDestination:t.Record({kyt_fee:t.Nat64,kyt_provider:t.Principal})}),o=t.Variant({p2wsh_v0:t.Vec(t.Nat8),p2tr_v1:t.Vec(t.Nat8),p2sh:t.Vec(t.Nat8),p2wpkh_v0:t.Vec(t.Nat8),p2pkh:t.Vec(t.Nat8)}),d=t.Variant({received_utxos:t.Record({to_account:a,mint_txid:t.Opt(t.Nat64),utxos:t.Vec(c)}),schedule_deposit_reimbursement:t.Record({burn_block_index:t.Nat64,account:a,amount:t.Nat64,reason:l}),sent_transaction:t.Record({fee:t.Opt(t.Nat64),change_output:t.Opt(t.Record({value:t.Nat64,vout:t.Nat32})),txid:t.Vec(t.Nat8),utxos:t.Vec(c),requests:t.Vec(t.Nat64),submitted_at:t.Nat64}),distributed_kyt_fee:t.Record({block_index:t.Nat64,amount:t.Nat64,kyt_provider:t.Principal}),init:r,upgrade:i,retrieve_btc_kyt_failed:t.Record({block_index:t.Nat64,owner:t.Principal,uuid:t.Text,address:t.Text,amount:t.Nat64,kyt_provider:t.Principal}),accepted_retrieve_btc_request:t.Record({received_at:t.Nat64,block_index:t.Nat64,address:o,amount:t.Nat64,kyt_provider:t.Opt(t.Principal)}),checked_utxo:t.Record({clean:t.Bool,utxo:c,uuid:t.Text,kyt_provider:t.Opt(t.Principal)}),removed_retrieve_btc_request:t.Record({block_index:t.Nat64}),confirmed_transaction:t.Record({txid:t.Vec(t.Nat8)}),replaced_transaction:t.Record({fee:t.Nat64,change_output:t.Record({value:t.Nat64,vout:t.Nat32}),old_txid:t.Vec(t.Nat8),new_txid:t.Vec(t.Nat8),submitted_at:t.Nat64}),ignored_utxo:t.Record({utxo:c}),reimbursed_failed_deposit:t.Record({burn_block_index:t.Nat64,mint_block_index:t.Nat64})}),x=t.Record({retrieve_btc_min_amount:t.Nat64,min_confirmations:t.Nat32,kyt_fee:t.Nat64}),u=t.Record({address:t.Text,amount:t.Nat64}),h=t.Record({block_index:t.Nat64}),p=t.Variant({MalformedAddress:t.Text,GenericError:t.Record({error_message:t.Text,error_code:t.Nat64}),TemporarilyUnavailable:t.Text,AlreadyProcessing:t.Null,AmountTooLow:t.Nat64,InsufficientFunds:t.Record({balance:t.Nat64})}),j=t.Variant({Signing:t.Null,Confirmed:t.Record({txid:t.Vec(t.Nat8)}),Sending:t.Record({txid:t.Vec(t.Nat8)}),AmountTooLow:t.Null,Unknown:t.Null,Submitted:t.Record({txid:t.Vec(t.Nat8)}),Pending:t.Null}),m=t.Record({from_subaccount:t.Opt(t.Vec(t.Nat8)),address:t.Text,amount:t.Nat64}),f=t.Variant({MalformedAddress:t.Text,GenericError:t.Record({error_message:t.Text,error_code:t.Nat64}),TemporarilyUnavailable:t.Text,InsufficientAllowance:t.Record({allowance:t.Nat64}),AlreadyProcessing:t.Null,AmountTooLow:t.Nat64,InsufficientFunds:t.Record({balance:t.Nat64})}),g=t.Variant({ValueTooSmall:c,Tainted:c,Minted:t.Record({minted_amount:t.Nat64,block_index:t.Nat64,utxo:c}),Checked:c}),v=t.Variant({GenericError:t.Record({error_message:t.Text,error_code:t.Nat64}),TemporarilyUnavailable:t.Text,AlreadyProcessing:t.Null,NoNewUtxos:t.Record({required_confirmations:t.Nat32,current_confirmations:t.Opt(t.Nat32)})});return t.Service({estimate_withdrawal_fee:t.Func([t.Record({amount:t.Opt(t.Nat64)})],[t.Record({minter_fee:t.Nat64,bitcoin_fee:t.Nat64})],["query"]),get_btc_address:t.Func([t.Record({owner:t.Opt(t.Principal),subaccount:t.Opt(t.Vec(t.Nat8))})],[t.Text],[]),get_deposit_fee:t.Func([],[t.Nat64],["query"]),get_events:t.Func([t.Record({start:t.Nat64,length:t.Nat64})],[t.Vec(d)],["query"]),get_minter_info:t.Func([],[x],["query"]),get_withdrawal_account:t.Func([],[a],[]),retrieve_btc:t.Func([u],[t.Variant({Ok:h,Err:p})],[]),retrieve_btc_status:t.Func([t.Record({block_index:t.Nat64})],[j],["query"]),retrieve_btc_with_approval:t.Func([m],[t.Variant({Ok:h,Err:f})],[]),update_balance:t.Func([t.Record({owner:t.Opt(t.Principal),subaccount:t.Opt(t.Vec(t.Nat8))})],[t.Variant({Ok:t.Vec(g),Err:v})],[])})},j=e=>u.eN.create({canisterId:h.qM,identity:e,idlFactory:p}),m=async e=>await(0,u.Qr)(h.cg,e);var f=n(81795),g=n(49828),v=n(20490),b=n(59257),_=n(16429);function A(e){return!("Confirmed"!==e&&"AmountTooLow"!==e)}function w(){const e=(0,b.WT)(),t=(0,v.O8)(e),n=(0,v.KH)();(0,s.useEffect)((()=>{const i=setInterval((()=>{!async function(){if(t&&t.length&&e)for(let i=0;i<t.length;i++){const s=BigInt(t[i].block_index),{state:r}=t[i];if(!A(r)){const t=await(await j()).retrieve_btc_status({block_index:s});n(e,s,t,void 0)}}}()}),1e4);return()=>{clearInterval(i)}}),[t,e])}var k=n(90329),N=n(38938),y=n(8428),R=n(67132),C=n(22545),V=n(2860),T=n(38705),O=n(64560),P=n(31246),F=n(23412),L=n(97382),S=n(78878),I=n(83224),M=n(6533),B=n(68894),D=n(45532),q=n(66357),E=n(30863),H=n(14754),W=n.n(H),z=n(36092);function Y(){return(0,z.jsx)("svg",{width:"12",height:"14",viewBox:"0 0 12 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,z.jsx)("path",{d:"M6.0013 3.33268V0.666016L2.66797 3.99935L6.0013 7.33268V4.66602C8.20797 4.66602 10.0013 6.45935 10.0013 8.66602C10.0013 10.8727 8.20797 12.666 6.0013 12.666C3.79464 12.666 2.0013 10.8727 2.0013 8.66602H0.667969C0.667969 11.6127 3.05464 13.9993 6.0013 13.9993C8.94797 13.9993 11.3346 11.6127 11.3346 8.66602C11.3346 5.71935 8.94797 3.33268 6.0013 3.33268Z",fill:"white"})})}function G(e,t){if(!e||!t)return"--";let n="--";for(let i=0;i<e.vout.length;i++){const s=e.vout[i];if(s.scriptpubkey_address===t){n=s.value;break}}return n}function Q(e){var t,n;let{transaction:i,block:s,address:r}=e;return(0,z.jsxs)(I.A,{children:[(0,z.jsx)(M.A,{children:i.status.block_time?(0,z.jsx)(y.A,{children:W()(1e3*Number(i.status.block_time)).format("YYYY-MM-DD HH:mm:ss")}):(0,z.jsx)(y.A,{children:"--"})}),(0,z.jsx)(M.A,{children:i.status.block_height?(0,z.jsx)(c.eq,{link:"https://explorer.btc.com/btc/block/".concat(i.status.block_height),children:i.status.block_height}):(0,z.jsx)(y.A,{children:"--"})}),(0,z.jsx)(M.A,{children:(0,z.jsx)(y.A,{sx:{maxWidth:"200px",wordBreak:"break-all",whiteSpace:"break-spaces","@media(max-width:640px)":{width:"300px"}},children:(0,z.jsx)(c.eq,{link:"https://explorer.btc.com/btc/transaction/".concat(i.txid),children:i.txid})})}),(0,z.jsx)(M.A,{children:(0,z.jsx)(y.A,{sx:{maxWidth:"200px",wordBreak:"break-all",whiteSpace:"break-spaces","@media(max-width:640px)":{width:"300px"}},children:(0,z.jsx)(c.eq,{link:"https://explorer.btc.com/btc/address/".concat(null===(t=i.vin[0])||void 0===t?void 0:t.prevout.scriptpubkey_address),children:null===(n=i.vin[0])||void 0===n?void 0:n.prevout.scriptpubkey_address})})}),(0,z.jsx)(M.A,{children:(0,z.jsx)(y.A,{sx:{maxWidth:"200px",wordBreak:"break-all",whiteSpace:"break-spaces","@media(max-width:640px)":{width:"300px"}},children:(0,z.jsx)(c.eq,{link:"https://explorer.btc.com/btc/address/".concat(r),children:r})})}),(0,z.jsx)(M.A,{children:(0,z.jsx)(y.A,{children:(0,F.t)(G(i,r),8).toFormat()})}),(0,z.jsx)(M.A,{children:(0,z.jsx)(y.A,{children:s&&i.status.block_height?Number(s)-i.status.block_height:"--"})})]})}function Z(e){let{address:t,block:n}=e;const[i,r]=(0,s.useState)(!1),{result:l,loading:d}=function(e,t){return(0,o.Pz)((0,s.useCallback)((async()=>{if(e)try{const t=await fetch("https://blockstream.info/api/address/".concat(e,"/txs"));return await t.json()}catch(t){return}}),[e]),t)}(t,i),x=(0,s.useMemo)((()=>t?null===l||void 0===l?void 0:l.filter((e=>!function(e,t){if(!e||!t)return!1;let n=!1;for(let i=0;i<e.vin.length;i++)if(e.vin[i].prevout.scriptpubkey_address===t){n=!0;break}return n}(e,t))).slice(0,8):[]),[l,t]);return(0,z.jsxs)(c.Am,{children:[(0,z.jsxs)(a.A,{sx:{display:"flex",justifyItems:"center"},children:[(0,z.jsx)(y.A,{color:"#ffffff",sx:{margin:"0 5px 0 0"},children:(0,z.jsx)(k.x6,{id:"PfHUmm"})}),(0,z.jsx)(a.A,{sx:{cursor:"pointer"},onClick:()=>r(!i),children:(0,z.jsx)(Y,{})})]}),(0,z.jsx)(y.A,{color:"#ffffff",sx:{margin:"5px 0 0 0"},children:(0,z.jsx)(k.x6,{id:"GwPFWp"})}),(0,z.jsx)(a.A,{sx:{margin:"0 0 3px 0"},children:(0,z.jsxs)(B.A,{className:d||!t?"with-loading":"",children:[(0,z.jsxs)(D.A,{children:[(0,z.jsx)(q.A,{children:(0,z.jsxs)(I.A,{children:[(0,z.jsx)(M.A,{children:(0,z.jsx)(k.x6,{id:"LhMjLm"})}),(0,z.jsx)(M.A,{children:(0,z.jsx)(k.x6,{id:"PFFhCT"})}),(0,z.jsx)(M.A,{children:(0,z.jsx)(k.x6,{id:"QbVNZJ"})}),(0,z.jsx)(M.A,{children:(0,z.jsx)(k.x6,{id:"ejVYRQ"})}),(0,z.jsx)(M.A,{children:(0,z.jsx)(k.x6,{id:"/jQctM"})}),(0,z.jsx)(M.A,{children:(0,z.jsx)(k.x6,{id:"hehnjM"})}),(0,z.jsx)(M.A,{children:(0,z.jsx)(k.x6,{id:"QW/8vm"})})]})}),(0,z.jsx)(E.A,{children:null===x||void 0===x?void 0:x.map((e=>(0,z.jsx)(Q,{transaction:e,block:n,address:t},e.txid)))})]}),0!==(null===x||void 0===x?void 0:x.length)||d?null:(0,z.jsx)(c.YQ,{}),(0,z.jsx)(c.n6,{loading:d||!t})]})})]})}var K=n(74758),U=n(29143);function X(){return(0,z.jsxs)(a.A,{sx:{margin:"30px 0 0 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"20px 0"},children:[(0,z.jsx)(U.N,{href:h.R4,label:(0,z.jsx)(k.x6,{id:"KxQwcq"})}),(0,z.jsx)(U.N,{href:(0,K.c)(h.qM),label:(0,z.jsx)(k.x6,{id:"hPK3eZ"})})]})}var J=n(52351),$=n(29954);const ee=n.p+"static/media/BTC.d40a4d2eb24abbcca413dd2734d2b1f1.svg",te=(0,J.A)((()=>({logo_box:{position:"relative",width:"80px",height:"80px",borderRadius:"50%","&.ck":{background:"linear-gradient(0deg, rgba(105, 108, 225, 0.39), rgba(105, 108, 225, 0.39)), linear-gradient(0deg, rgba(255, 255, 255, 0.14), rgba(255, 255, 255, 0.14))"},"&.ic":{background:"linear-gradient(135.36deg, #3A425F 15.81%, rgba(41, 49, 79, 0) 77.64%)"}},logo:{width:"74px",height:"74px",position:"absolute",top:"3px",left:"3px"}})));function ne(){return(0,z.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,z.jsx)("path",{d:"M6 6L12 12L6 18",stroke:"#8572FF",strokeOpacity:"0.6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M12 6L18 12L12 18",stroke:"#8572FF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function ie(e){let{type:t}=e;const n=te();return(0,z.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:"0 59px"},children:[(0,z.jsx)(a.A,{className:"".concat(n.logo_box," ").concat("mint"===t?"ic":"ck"),children:(0,z.jsx)(a.A,{className:n.logo,children:(0,z.jsx)("img",{src:"mint"===t?ee:$.y5.logo,alt:"",width:"100%",height:"100%"})})}),(0,z.jsx)(ne,{}),(0,z.jsx)(a.A,{className:"".concat(n.logo_box," ").concat("mint"===t?"ck":"ic"),children:(0,z.jsx)(a.A,{className:n.logo,children:(0,z.jsx)("img",{src:"mint"===t?$.y5.logo:ee,alt:"",width:"100%",height:"100%"})})})]})}function se(){return(0,z.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,z.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.6654 5.33333H2.66536V13.3333H10.6654V5.33333ZM2.66536 4C1.92898 4 1.33203 4.59695 1.33203 5.33333V13.3333C1.33203 14.0697 1.92898 14.6667 2.66536 14.6667H10.6654C11.4017 14.6667 11.9987 14.0697 11.9987 13.3333V5.33333C11.9987 4.59695 11.4017 4 10.6654 4H2.66536Z",fill:"white"}),(0,z.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3346 12L13.3346 2.66667L4.0013 2.66667L4.0013 1.33333L13.3346 1.33333C14.071 1.33333 14.668 1.93029 14.668 2.66667L14.668 12L13.3346 12Z",fill:"white"})]})}function re(e){let{buttons:t,handleChange:n,active:r,block:l}=e;const u=(0,N.A)(),p=(0,b.WT)(),[m,_]=(0,s.useState)(!1),[A,w]=(0,s.useState)(!1),[I]=(0,S.cO)(),{result:M}=(0,O.nC)(h.cg,p,m),{result:B}=(0,P.Vs)(h.cg),{result:D,loading:q}=function(e,t){const n=(0,v.ms)(e),i=(0,v.Nx)();return(0,o.Pz)((0,s.useCallback)((async()=>{if(!e)return;if(n)return n;const s=await(0,g.u)(),r=(0,d.Pk)(await(await j(s)).get_btc_address({owner:(0,x.E)(f.p.fromText(e)),subaccount:(0,x.E)(t)})).data;return r&&e&&i(e,r),r}),[e,t,n]))}(p),E=(0,s.useCallback)((async(e,t)=>{const n=await(0,g.u)();return(0,d.Pk)(await(await j(n)).update_balance({owner:(0,x.E)(f.p.fromText(e)),subaccount:(0,x.E)(t)}))}),[]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(c.Am,{children:[(0,z.jsx)(c.Kp,{tabs:t,onChange:n,active:r}),(0,z.jsx)(a.A,{sx:{margin:"20px 0 0 0"},children:(0,z.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,z.jsx)(ie,{type:"mint"}),(0,z.jsxs)(a.A,{sx:{margin:"20px 0 0 0",display:"flex",gap:"0 10px",alignItems:"center"},children:[(0,z.jsxs)(y.A,{color:"#fff",children:[(0,z.jsx)(k.x6,{id:"0QDjxt"}),"\xa0",(0,F.t)(M,null===B||void 0===B?void 0:B.decimals).toFormat()," ckBTC"]}),(0,z.jsxs)(R.A,{variant:"outlined",size:"small",disabled:A,onClick:async()=>{if(!p)return;w(!0);const{status:e,message:t}=await E(p,void 0);e===L.i.OK?(I(i.Ru._({id:"qUs4IW"}),S.lA.success),_(!m)):I(null!==t&&void 0!==t?t:i.Ru._({id:"u2HXZY"}),S.lA.error),w(!1)},children:[A?(0,z.jsx)(C.A,{size:18,sx:{margin:"0 5px 0 0",color:"inherit"}}):null,(0,z.jsx)(k.x6,{id:"EkH9pt"})]})]}),q?(0,z.jsx)(a.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"180px"},children:(0,z.jsx)(C.A,{})}):D?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(a.A,{sx:{background:u.palette.background.level4,margin:"30px 0 0 0",padding:"10px"},children:[(0,z.jsx)(y.A,{children:(0,z.jsx)(k.x6,{id:"/kMgYW"})}),(0,z.jsx)(a.A,{sx:{margin:"15px 0 0 0",display:"flex",justifyContent:"center"},children:(0,z.jsx)(V.A,{value:null!==D&&void 0!==D?D:""})})]}),(0,z.jsxs)(a.A,{sx:{margin:"10px 0 0 0",display:"flex",alignItems:"center",gap:"0 10px"},children:[(0,z.jsx)(T.A,{content:D,children:(0,z.jsx)(y.A,{color:"#fff",fontWeight:500,children:D})}),(0,z.jsx)(T.A,{content:D,children:(0,z.jsx)(se,{})})]})]}):(0,z.jsx)(y.A,{sx:{margin:"10px 0 0 0"},children:(0,z.jsx)(k.x6,{id:"7G7XZF"})}),(0,z.jsxs)(a.A,{sx:{margin:"30px 0 0 0",display:"flex",width:"360px","@media(max-width:640px)":{width:"320px"}},children:[(0,z.jsx)(y.A,{sx:{flex:"1"},children:(0,z.jsx)(k.x6,{id:"fX7zrY"})}),(0,z.jsx)(y.A,{children:(0,z.jsx)(k.x6,{id:"CsCnoM"})})]}),(0,z.jsxs)(a.A,{sx:{margin:"10px 0 0 0",display:"flex",width:"360px","@media(max-width:640px)":{width:"320px"}},children:[(0,z.jsx)(y.A,{sx:{flex:"1"},children:(0,z.jsx)(k.x6,{id:"zifD4w"})}),(0,z.jsx)(y.A,{children:(0,z.jsx)(k.x6,{id:"+zzHvy"})})]}),(0,z.jsx)(X,{})]})})]}),(0,z.jsx)(a.A,{sx:{margin:"20px 0 0 0"},children:(0,z.jsx)(Z,{address:D,block:l})})]})}function ae(e){let{spender:t,spenderSub:n,owner:i,ownerSub:r}=e;return(0,o.Pz)((0,s.useCallback)((async()=>{if(t&&i)return await async function(e){let{spender:t,spenderSub:n,owner:i,ownerSub:s}=e;const r=await(await m(!0)).icrc2_allowance({account:{owner:i,subaccount:(0,x.E)(s)},spender:{owner:t,subaccount:(0,x.E)(n)}});return(0,d.Pk)(r.allowance).data}({spender:f.p.fromText(t),spenderSub:n,owner:f.p.fromText(i),ownerSub:r})}),[t,n,i,r]))}function ce(){const e=(0,b.WT)(),t=h.qM,{result:n}=ae({spender:t,owner:e});return(0,s.useCallback)((async e=>{let{amount:i,expected_allowance:s}=e;return t?!n||n<BigInt(i)?await async function(e){let{spender:t,amount:n,expected_allowance:i,spenderSub:s}=e;return(0,d.Pk)(await(await m(!0)).icrc2_approve({fee:[],memo:[],from_subaccount:[],created_at_time:[],amount:BigInt(n),spender:{owner:t,subaccount:(0,x.E)(s)},expires_at:(0,x.E)(i),expected_allowance:(0,x.E)(i)}))}({spender:f.p.fromText(t),amount:i,expected_allowance:s}):{status:"ok",message:"No need to approve"}:{status:"err",message:"No spender!"}}),[n,t])}var le=n(34436),oe=n(37155),de=n(70526);function xe(e){var t;let{tx:n}=e;return(0,z.jsxs)(I.A,{children:[(0,z.jsx)(M.A,{children:(0,z.jsx)(y.A,{children:n.block_index})}),(0,z.jsx)(M.A,{children:(0,z.jsx)(y.A,{children:null!==(t=n.state)&&void 0!==t?t:"--"})}),(0,z.jsx)(M.A,{children:n.txid?(0,z.jsx)(y.A,{sx:{maxWidth:"400px",wordBreak:"break-all",whiteSpace:"break-spaces","@media(max-width:640px)":{width:"300px"}},children:(0,z.jsx)(c.eq,{link:"https://explorer.btc.com/btc/transaction/".concat(n.txid),children:n.txid})}):(0,z.jsx)(y.A,{children:"--"})}),(0,z.jsx)(M.A,{children:n.value?(0,z.jsx)(y.A,{children:(0,F.t)(n.value,8).toFormat()}):(0,z.jsx)(y.A,{children:"--"})})]})}function ue(){const e=(0,b.WT)(),t=(0,v.O8)(e);return(0,z.jsxs)(c.Am,{children:[(0,z.jsx)(a.A,{sx:{display:"flex",justifyItems:"center"},children:(0,z.jsx)(y.A,{color:"#ffffff",children:(0,z.jsx)(k.x6,{id:"l/4A2e"})})}),(0,z.jsx)(a.A,{sx:{margin:"0 0 3px 0"},children:(0,z.jsxs)(B.A,{children:[(0,z.jsxs)(D.A,{children:[(0,z.jsx)(q.A,{children:(0,z.jsxs)(I.A,{children:[(0,z.jsx)(M.A,{children:(0,z.jsx)(k.x6,{id:"5Lo2tO"})}),(0,z.jsx)(M.A,{children:(0,z.jsx)(k.x6,{id:"RS0o7b"})}),(0,z.jsx)(M.A,{children:(0,z.jsx)(k.x6,{id:"QbVNZJ"})}),(0,z.jsx)(M.A,{children:(0,z.jsx)(k.x6,{id:"hehnjM"})})]})}),(0,z.jsx)(E.A,{children:null===t||void 0===t?void 0:t.map((e=>(0,z.jsx)(xe,{tx:e},e.block_index)))})]}),0!==(null===t||void 0===t?void 0:t.length)&&t?null:(0,z.jsx)(c.YQ,{})]})})]})}var he=n(21045);function pe(e){let{open:t,onClose:n,unDissolveBalance:r,token:l}=e;const o=(0,b.Le)(),[x,u]=(0,s.useState)(void 0),[p,m]=(0,s.useState)(!1),[f]=(0,S.cO)(),_=(0,v.KH)();let A="";return x&&!(0,de.tf)(x)&&(A=i.Ru._({id:"6p07iY"})),r&&!r.isGreaterThan(.001)&&(A=i.Ru._({id:"W9beDp"})),x||(A=i.Ru._({id:"z4Y3Lr"})),(0,z.jsx)(he.A,{open:t,title:i.Ru._({id:"g6HMHH"}),onClose:n,children:(0,z.jsxs)(a.A,{children:[(0,z.jsx)(y.A,{sx:{margin:"10px 0 0 0"},children:(0,z.jsx)(k.x6,{id:"GpNFkb"})}),(0,z.jsx)(a.A,{sx:{margin:"15px 0 0 0"},children:(0,z.jsx)(c.GV,{value:r&&l?(0,F.t)(r,l.decimals).toFormat():"--",disabled:!0})}),(0,z.jsxs)(y.A,{sx:{margin:"20px 0 0 0"},children:[(0,z.jsx)(y.A,{component:"span",color:"#D3625B",children:"*"}),(0,z.jsx)(k.x6,{id:"tPrmjP"})]}),(0,z.jsx)(a.A,{sx:{margin:"15px 0 0 0"},children:(0,z.jsx)(c.GV,{value:x,onChange:e=>u(e),inputProps:{maxLength:255}})}),(0,z.jsxs)(a.A,{sx:{margin:"15px 0 0 0"},children:[(0,z.jsx)(a.A,{sx:{margin:"5px 0 0 0",display:"flex",justifyContent:"space-between"},children:(0,z.jsxs)(y.A,{component:"div",children:[(0,z.jsxs)(y.A,{children:["Dissolve Fee: ",h.Z2,"ckBTC"]}),(0,z.jsx)(y.A,{children:(0,z.jsx)(k.x6,{id:"jhIMri"})})]})}),(0,z.jsx)(a.A,{sx:{width:"100%",margin:"20px 0 0 0"},children:(0,z.jsx)(g.A,{onSubmit:async()=>{if(!r||!l||!x||!o)return;const e=r;m(!0);const{status:t,message:s,data:a}=await async function(e,t){const n=await(0,g.u)();return(0,d.Pk)(await(await j(n)).retrieve_btc({address:e,amount:t}))}(x,BigInt((0,le.u)(e)));t===L.i.ERROR?f(null!==s&&void 0!==s?s:i.Ru._({id:"idwgc1"}),S.lA.error):(f("Dissolve successfully",S.lA.success),null!==a&&void 0!==a&&a.block_index&&_(o.toString(),a.block_index,void 0,(0,le.u)(e)),u(void 0),n()),m(!1)},children:e=>{let{submit:t}=e;return(0,z.jsxs)(R.A,{variant:"contained",fullWidth:!0,size:"large",onClick:t,disabled:!!A||p||!r,children:[p?(0,z.jsx)(C.A,{color:"inherit",size:22,sx:{margin:"0 5px 0 0"}}):null,A||(0,z.jsx)(k.x6,{id:"0jqDvh"})]})}})})]})]})})}function je(e){let{buttons:t,handleChange:n,active:r}=e;const l=(0,b.WT)(),[u,p]=(0,s.useState)(!1),[m,f]=(0,s.useState)(void 0),[_,A]=(0,s.useState)(void 0),[N,V]=(0,s.useState)(!1),[T,I]=(0,s.useState)(!1),{result:M,loading:B}=(0,O.nC)(h.cg,l,u),{result:D}=(0,P.Vs)(h.cg),q=(0,v.KH)();w();const[E]=(0,S.cO)(),{result:H}=function(){const e=(0,b.WT)(),t=(0,v.MT)(e),n=(0,v.X5)();return(0,o.Pz)((0,s.useCallback)((async()=>{if(!e)return;const t=await(0,g.u)(),i=(0,d.Pk)(await(await j(t)).get_withdrawal_account()).data;return i&&n(e,i.owner,i.subaccount),i}),[null===t||void 0===t?void 0:t.owner,e]))}(),W=(0,s.useMemo)((()=>({owner:null===H||void 0===H?void 0:H.owner,sub:null!==H&&void 0!==H&&H.subaccount?null===H||void 0===H?void 0:H.subaccount[0]:void 0})),[JSON.stringify(H)]),{result:Y,loading:G}=(0,O.nC)(h.cg,W.owner,!0,W.sub),Q=ce();let Z="";return _&&!(0,de.tf)(_)&&(Z=i.Ru._({id:"6p07iY"})),m||(Z=i.Ru._({id:"tbR3sW"})),m&&!new oe.A(m).isGreaterThan(.001)&&(Z=i.Ru._({id:"W9beDp"})),_||(Z=i.Ru._({id:"z4Y3Lr"})),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(c.Am,{children:[(0,z.jsx)(c.Kp,{tabs:t,onChange:n,active:r}),(0,z.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",margin:"20px 0 0 0"},children:[(0,z.jsx)(ie,{type:"dissolve"}),(0,z.jsxs)(a.A,{sx:{margin:"20px 0 0 0",display:"flex",gap:"0 10px",alignItems:"center"},children:[(0,z.jsx)(a.A,{children:(0,z.jsxs)(y.A,{color:"#fff",children:[(0,z.jsx)(k.x6,{id:"0QDjxt"}),"\xa0",(0,F.t)(M,null===D||void 0===D?void 0:D.decimals).toFormat()," ckBTC"]})}),(0,z.jsx)(R.A,{variant:"outlined",size:"small",disabled:B,onClick:()=>p(!u),children:(0,z.jsx)(k.x6,{id:"EkH9pt"})})]}),(0,z.jsxs)(a.A,{sx:{margin:"20px 0 0 0",display:"flex",gap:"0 10px",alignItems:"center",justifyContent:"flex-end"},children:[(0,z.jsxs)(y.A,{color:"#fff",children:[(0,z.jsx)(k.x6,{id:"tOjDQ7"}),"\xa0",G||!Y?"--":(0,F.t)(Y,null===D||void 0===D?void 0:D.decimals).toFormat()," ","ckBTC"]}),(0,z.jsx)(R.A,{variant:"outlined",size:"small",onClick:()=>I(!0),children:(0,z.jsx)(k.x6,{id:"3iMPjK"})})]}),(0,z.jsxs)(a.A,{sx:{margin:"40px 0 0 0",width:"100%",maxWidth:"474px"},children:[(0,z.jsx)(y.A,{color:"#fff",children:(0,z.jsx)(k.x6,{id:"+Mpjj4"})}),(0,z.jsxs)(y.A,{sx:{margin:"10px 0 0 0"},children:[(0,z.jsx)(y.A,{component:"span",color:"#D3625B",children:"*"}),(0,z.jsx)(k.x6,{id:"tPrmjP"})]}),(0,z.jsx)(a.A,{sx:{margin:"15px 0 0 0"},children:(0,z.jsx)(c.GV,{value:_,onChange:e=>A(e),inputProps:{maxLength:255}})}),(0,z.jsxs)(y.A,{sx:{margin:"10px 0 0 0"},children:[(0,z.jsx)(y.A,{component:"span",color:"#D3625B",children:"*"}),(0,z.jsx)(k.x6,{id:"GpNFkb"})]}),(0,z.jsxs)(a.A,{sx:{margin:"15px 0 0 0"},children:[(0,z.jsx)(c.LT,{value:m,onChange:e=>f(String(e)),numericProps:{allowNegative:!1,decimalScale:8,maxLength:26}}),(0,z.jsxs)(a.A,{sx:{margin:"5px 0 0 0",display:"flex",justifyContent:"space-between"},children:[(0,z.jsxs)(y.A,{component:"div",children:[(0,z.jsxs)(y.A,{children:["Dissolve Fee: ",h.Z2,"ckBTC"]}),(0,z.jsx)(y.A,{children:(0,z.jsx)(k.x6,{id:"jhIMri"})})]}),(0,z.jsx)(y.A,{color:"secondary",sx:{cursor:"pointer"},onClick:()=>{D&&f((0,F.t)(M,null===D||void 0===D?void 0:D.decimals).minus((0,F.t)(D.transFee,D.decimals)).toFixed(D.decimals-1))},children:(0,z.jsx)(k.x6,{id:"CK1KXz"})})]}),(0,z.jsx)(a.A,{sx:{width:"100%",margin:"20px 0 0 0"},children:(0,z.jsx)(g.A,{onSubmit:async()=>{if(!m||!l||!D||!_||!H)return;const e=BigInt((0,le.u)((0,F.N)(m,D.decimals)));V(!0);const{status:t,message:n}=await Q({amount:e});if(t===L.i.ERROR)return E(null!==n&&void 0!==n?n:i.Ru._({id:"Uif/ev"}),S.lA.error),void V(!1);const{status:s,message:r,data:a}=await async function(e,t){const n=await(0,g.u)();return(0,d.Pk)(await(await j(n)).retrieve_btc_with_approval({from_subaccount:(0,x.E)(void 0),address:e,amount:t}))}(_,e);s===L.i.ERROR?E(null!==r&&void 0!==r?r:i.Ru._({id:"idwgc1"}),S.lA.error):(E("Dissolve successfully",S.lA.success),null!==a&&void 0!==a&&a.block_index&&q(l,a.block_index,void 0,e.toString()),p(!u),f(void 0),A(void 0)),V(!1)},children:e=>{let{submit:t}=e;return(0,z.jsxs)(R.A,{variant:"contained",fullWidth:!0,size:"large",onClick:t,disabled:!!Z||N,children:[N?(0,z.jsx)(C.A,{color:"inherit",size:22,sx:{margin:"0 5px 0 0"}}):null,Z||(0,z.jsx)(k.x6,{id:"0jqDvh"})]})}})})]})]}),(0,z.jsx)(X,{})]})]}),(0,z.jsx)(a.A,{sx:{margin:"20px 0 0 0"},children:(0,z.jsx)(ue,{})}),T?(0,z.jsx)(pe,{token:D,unDissolveBalance:Y,open:T,onClose:()=>I(!1)}):null]})}const me=[{key:"mint",value:i.Ru._({id:"5IrCQY"})},{key:"dissolve",value:i.Ru._({id:"TGmg93"})}];function fe(){const e=(0,r.W6)(),[t,n]=(0,s.useState)(""),{type:o}=(0,l.e)();(0,s.useEffect)((()=>{o&&n(o)}),[o]);const d=t=>{n(t.key),e.push("/wallet/ckBTC?type=".concat(t.key))},x=function(){const e=(0,_.r)((async()=>{try{const e=await fetch("https://blockchain.info/q/getblockcount");return await e.json()}catch(e){return}}),void 0,3e4);return(0,s.useMemo)((()=>e),[e])}();return(0,z.jsxs)(c.mO,{children:[(0,z.jsx)(c.BI,{prevLink:"/wallet",prevLabel:i.Ru._({id:"sb9Y58"}),currentLabel:"dissolve"===o?i.Ru._({id:"0jqDvh"}):i.Ru._({id:"7kb9HU"})}),(0,z.jsx)(a.A,{sx:{height:"20px"}}),"dissolve"===o?(0,z.jsx)(je,{handleChange:d,buttons:me,active:t}):(0,z.jsx)(re,{handleChange:d,buttons:me,active:t,block:x})]})}},29143:(e,t,n)=>{n.d(t,{N:()=>c});var i=n(91331),s=n(8428),r=n(36092);function a(){return(0,r.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.43866 2.42969H1.16146V0.429688H8.85723H9.85723V1.42969V9.12545H7.85723V3.83954L1.94156 9.75521L0.527344 8.341L6.43866 2.42969Z",fill:"#5669DC"})})}n(53248);function c(e){let{href:t,label:n}=e;return(0,r.jsx)("a",{href:t,target:"_blank",style:{textDecoration:"none"},rel:"noreferrer",children:(0,r.jsxs)(i.A,{sx:{display:"flex",gap:"0 10px",alignItems:"center"},children:[(0,r.jsx)(s.A,{children:n}),(0,r.jsx)(a,{})]})})}},74758:(e,t,n)=>{function i(e){return e.length>27?"https://icscan.io/principal/".concat(e):"https://dashboard.internetcomputer.org/canister/".concat(e)}n.d(t,{c:()=>i})}}]);
//# sourceMappingURL=1179.3481589c.chunk.js.map